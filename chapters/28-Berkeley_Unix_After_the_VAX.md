# VAX 后的伯克利 Unix

在第 18 章中，我引用了 Kirk 提到他们在 4.4 中加入了“portals”。作为英国对 Unix 发展贡献的又一个例子，Jan-Simon Pendry 告诉我：

>我在 4.4BSD 中加入了“portals”。它们和 4.3 BSD 架构参考中定义的“`<<portals>>`”不完全一样，但你可以用它们做很多相同的事情。也许我本该选个别的名字。
>
>具体做法是，守护进程创建一个 Unix 域套接字，并将它附加到系统命名空间（惯例是“/p”）。它等待来自内核的消息……
>
>真正的想法是把所有网络相关的杂乱代码从应用程序中剥离出来，放进一到两个守护进程里。这也让实现第 9 版的 ipcopen() 函数变得非常简单。当然，在 4.4 中没有修改任何应用程序。你也可以用 awk 脚本创建网络连接，而不需要那些已经污染了 perl 的套接字垃圾代码。

加州大学伯克利分校故事的结尾是 Kirk 的话：

>我们开始关注 Computer Console Inc 的 Tahoe 机器。显而易见，VAX 既没有变得更快也没有更便宜。此外，DEC 这个时候已经有了 Ultrix 产品，他们把 4.3BSD 看作竞争对手\[Armando Stettner 已经不在 DEC Unix 小组了]。我们不再收到反馈了：新硬件的提前信息，详细规格，设备驱动等等。很明显，DEC 会让我们的日子更难过，而 VAX 架构从长远来看并不乐观。
>
>Sam 那时在 LucasFilm 工作，他做了市场上的所有机器的分析。他决定 CCI Tahoe 系列的机器架构最好，当前性价比也不错。未来版本的设计也很优秀。
>
>他们有一台 6 MIP 的机器，体积相当于今天的桌面机。他们设计了一台 35 MIP 的机器，当时大多数厂商还在发货低至中等十几 MIP 的机器。我们设法拿到了一些他们的机器。他们贡献了一个 BSD 端口。他们觉得出于营销原因必须转向基于 System V 的系统，毕竟许多其他厂商都这么做。
>
>4.3 Tahoe 版本本应是标准的 4.3BSD 移植到 Tahoe 上，事实上，中间做了一些改动（比如磁盘标签），所以系统有些不同。目的是对系统做第一轮划分，以支持两个架构。
>
>不幸的是，CCI 取消了后续项目，Tahoe 变成了死架构。但他们至少让我们完成了 n = 2 的案例（指同时支持两个架构）。
>
>Reno 版本是我们做的最后一款“直接启动裸硬件”的系统版本。后来很明显，我们需要一台端口到不算大型机的工作站。我们联系上了基于 68K 的 HP 工作站。部分原因是 Berkeley 的一些人开始了这个端口，后由犹他大学的人完成。HP 愿意给我们硬件支持，一切顺利。

1993 年 6 月，伯克利发布了 4.4，同时终止了计算机系统研究小组。Keith Bostic 和 Kirk McKusick 都离开了加利福尼亚大学；Mike Karels 则在前一年已经离开。贝尔实验室的 Unix 研究早在 1980 年代末就已停止。现在，最重要的非 AT\&T 场所也“退出了 Unix 开发”。Unix 仍在持续发展，但两个历史上最重要的地区已不再参与这一发展。
