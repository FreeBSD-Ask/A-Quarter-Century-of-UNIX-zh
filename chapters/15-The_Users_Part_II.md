# 用户 第二部分

在我看来，Unix 故事中最吸引人的方面之一，就是它以极快的速度传播到了加拿大、欧洲、澳大利亚和日本。由于详细追踪过程会非常冗长，我选择了几个国家，让实际参与者来讲述他们的经历。我之前提到过其中一些用户，但现在你可以听到他们自己的声音。

首先，这是玛丽女王学院（Queen Mary College，QMC。现为玛丽女王和韦斯特菲尔德学院）的 George Coulouris 教授。我问他 QMC 是如何在 1973 年末获得 Version 4 的。

>William Newman 是我们实验室的访问研究员，大约从 1971 年 10 月开始，待了稍超过一年（后来他去了 Xerox PARC，现在在剑桥的 Rank Xerox EuroPARC 工作）。在他的指导下，我们发现了交互式小型机系统的价值。他和 Mike Cole 在玛丽女王学院开发了一个单用户交互式操作系统（称为 MIFS）。MIFS 运行在 Interdata 计算机上，松散地模仿了 TENEX。它是为支持两个研究项目而开发的：一个是 William 设计图形编程语言的研究，另一个是我们一组人利用微程序仿真研究新机器架构的设计。像 Unix 一样，MIFS 包含了广泛的组件和工具——文件系统、系统编程语言、编译器-编译器、带有单字符交互的行编辑器、调试器等等。几乎所有这些都是由 William 和 Mike 开发的。
>
>在 MIFS 开发期间，我们还没听说过 Unix，但 William 还在我们这里时，他去过 Bell Labs 访问。回来后他说：“他们似乎在 Murray Hill 开发了类似 MIFS 的东西，但它支持多用户，并且运行在 PDP-11 上。” Mike Cole 获得了一些文档，研究后得出结论，这确实能给我们带来很大好处——它提供了我们在 MIFS 中发现非常有用的大部分功能，且远远超出了 MIFS 的范围。
>
>我们没有九轨磁带驱动器，只有 DECtape 和一台 System Industries 的 10 兆字节可交换硬盘。真正的问题是 Ken 没有为 SI 控制器写驱动程序（全世界没人有）。显然，我们不能用只有 DECtape 作为外设的 Unix 系统来开发新驱动程序——交换操作会使整个过程极其缓慢！Mike Cole 是我们的系统专家，他解决了这个问题。1973 年夏天，他在去 Xerox PARC 访问几个月的路上，从 Ken 那里用 DECtape 拿到了 V4 版本。在 PARC 时，他去了 Berkeley，写并编译了一个简单的 SI 控制器驱动程序，并构建了包含该驱动的内核。但 Berkeley 没有任何 SI 磁盘，所以他没法在那里测试！回到玛丽女王学院后，DECtape 顺利安装，好家伙——幸运的是 Mike 是个非常优秀的程序员。
>
>令人惊讶的是，（a）我们竟然敢买一台磁盘与 Bell Labs 系统不兼容的机器，而当时我们本打算运行 Unix；（b）Mike 居然能在第一次尝试时就写出一个能工作的磁盘驱动，尽管他从未写过 Unix 驱动，从未用过 C 语言，也从未使用过 Unix。

Mike Cole 补充说：

>George 的说法大体正确，但有几个细节不幸地削弱了我那看似传奇的编程技能。我的记忆有些模糊，但我认为以下才是 73 年夏天的真实经过。
>
>我并没有在去西海岸的路上从 Bell Labs 拿到磁带。相反，在 PARC 的时候，我花了几个下午时间在 Berkeley 的 Mike Stonebraker 小组，并从他们那里（经过 AT\&T 的必要许可）拿到了一份 Unix 和相关文档。我随后开始学习足够的 C 语言来编写 SI 磁盘驱动程序，并用他们的 11/45 机器配合 LA30 DECwriters 构建系统（那是个痛苦的经历）。据我记得，他们当时正忙于开发 Ingres。
>
>因为系统必须在我回到 QMC 后第一次就能正常工作，我决定在回英国的路上先去 Bell Labs 一趟。Ken Thompson 检查了我的代码，发现了一两个错误（几乎肯定是因为在 C 语言中错误使用指针），然后把整个 Unix 软件装到了 7 到 8 盘 DECtape 上。Unix 就这样第一次装进了英国，装在一个 PanAm 行李袋里！
>
>作为英国第一个使用 Unix 的站点，我记得 74 年时受邀到 Edinburgh 和 Cambridge 介绍我们使用这个叫 Unix 的奇怪操作系统。让我印象深刻的是 Cambridge 的 Neil Wiseman 和 Charles Lang 的团队非常反感，根本不考虑采纳一个没有供应商支持的系统（据我记得他们当时使用的是 RSX-11）。这就是早期推广者的失望啊！

不久之后，Nigel Martin 是 Queen Mary College（QMC）的一名学生，当 City University 的 Sunil Das 获得了 Western Electric 许可后，就不必再等新泽西去处理向英国运送软件的问题了：Sunil 从 Nigel 那里拿到了 V5+ 版本。

与此同时，多伦多大学也获得了 Unix。在详细介绍历史之前，必须强调 Unix 与加拿大的紧密联系。Brian Kernighan 是多伦多大学的本科生；Al Aho 也在那里获得了学位；Heinz Lycklama 在安大略省汉密尔顿的 McMaster 大学接受教育；Morven Gentleman 曾在蒙特利尔的 McGill 大学就读，并在安大略省滑铁卢大学任教 15 年；Tom Duff 是滑铁卢大学的本科生，后来加入了多伦多大学的 Rob Pike、David Tilbrook、Howard Trickey 和 Mike Tilson 团队；Tom Cargill 在滑铁卢大学获得博士学位。还有许多其他人可以列举。（甚至我自己也曾在多伦多大学任教 11 年。）

多伦多大学于 1974 年中购买了一台 PDP 11/45，运行的是 Version 5。10 月 1 日，它获得了 V6 的许可。其他大学就没那么耐心了。Tom Duff 曾告诉我：

>1974 年，在滑铁卢大学。Steve Johnson 当时正在休学年（我那时也是那里的本科生），他从实验室打电话连接到了 Unix 机器。有人在他身边偷看了号码，后来用这个号码打电话，拿走了系统源代码。

Doug McIlroy 告诉我，传说是错的：是他的实验室电话号码被偷了。“我在滑铁卢做了一个演讲，Unix 的电话号码出现在学生计算机俱乐部的电话账单上。等到教职工发现并绝望地叫我去问时，我们的代码和他们的代码已经纠缠在一起，无法分开了。”

第二年，Duff 成为多伦多的研究生。（Rob Pike 是一九七五年夏天的实习生；Dave Galloway 是一九七六年夏天的实习生。）Duff 说：

>这台 45 机在九月到达，十二月开始运行第五版。我记得六版开始运行是在稍晚一些的时候……一九七五年初可能是对的。那时我正在写论文，还没到第六版引入的分离指令和数据（split I\&D）阶段。\[Mike] Tilson、\[Bill] Reeves 和我组成了那个冷加载第五版磁带的团队。
>
>我们遇到了一些问题，给 Ken 打电话寻求帮助，虽然显然他接到的电话比他想象中还多。大约二十个运行第五版的站点，这个分发规模远大于他之前遇到的。mkfs 的说明中提到，如何在 RKO5 上用 4000 个块制作根文件系统，剩下 872 个块（几乎半兆字节！）用作交换空间。Bill 在第二个 RK 上敲入了同样的公式来制作文件系统，觉得浪费的几千字节不值得花时间去查 RKO5 文档了解它到底有多大。一个星期后我们遇到了瓶颈，我花了几个小时阅读 check 程序中 -s 选项的代码，发现实际上可以修改超级块里的文件系统大小，然后运行 `check -s` 来回收这些块。

Duff 还因为使用系里的 Xerox 复印机打印 yacc 手册而惹上麻烦——在那个年代，官僚体系严格控制着复印权力。

>Mike Tilson 修改了 Duff 的版本。
>
>第一个系统是 PDP-11/40，这是一台临时机器，在等待 11/45 交付期间使用。我相信我们能够验证 Unix 仅用 64KB 内存就能启动的说法！这盘磁带是 Ken 亲自制作的，他在 Bell Labs 亲手交给我的。（当时和现在一样，AT\&T 发货很慢，但不像现在，你可以绕过繁琐的手续，自己拿到磁带。）
>
>11/40 配备了 GT-40 显示器：它的驱动程序是多伦多大学最早的“定制破解”之一。


1977 年 2 月 11 日星期五，位于多伦多校园 Sanford Fleming 工程大楼东北角发生火灾。尽管多伦多消防队全力扑救，建筑几乎被烧毁，剩余部分（除立面外，现为新楼的正面）也被拆除。根据 Tilson 所述，11/45 计算机整夜运行，直到……

>大约在上午 9 点左右，消防队终于理清了大楼内错综复杂的电线，成功切断了电源。还有一点值得注意：火灾发生前一周，实验室经理曾讨论过异地备份的问题，结论是这是过于紧张的想法，可能没必要。火灾过后，我们返回时，首要任务之一就是建立异地备份程序。

1977 年 11 月 1 日，多伦多获得了 Phototypesetter V7 的许可。稍后我会回到多伦多的情况。现在，我们先去欧洲。Teus Hagen 在第 10 章讲述了 Unix 在荷兰的故事。Hagen 认为，“Unix 中的技术（字符串表达式、yacc、行编辑器、文本处理、awk、字节流哲学、管道）在早期推动了欧洲计算机科学的巨大进步。仅仅几个月内，欧洲这边的成果就大幅领先。”他还告诉我：

>我认为我们（阿姆斯特丹数学中心）大约在伦敦的 Queen Mary College 获得 Unix 的差不多同时也收到了它。大约过了一年，其他人才拿到了第 6 版。我手里还保留着最初的手册。奈梅亨大学（Hendrik Jan Thomassen）是下一个安装 Unix 的，经过一番讨论，弗里大学的 Andy Tanenbaum 也获得了它（当时 Andy 正忙于自己的操作系统开发）。
>
>我们面临的一个问题是计算机设备价格极高：磁带单元大约要 4.5 万美元，一台磁盘驱动器（DEC RM05）要 5.5 万美元（我们的其中一台设备曾经一次差点“飞”出机房）。
>
>我们与 DEC 维护人员也有麻烦，因为他们要求运行 RSX 或 VMS，否则无法修复我们的硬件问题。但由于 Unix 下的错误信息更清晰，我们最终说服了他们。可是，如何在有缺陷的计算机系统上安装 VMS 或 RSX 呢？



Hagen 并不是唯一一个遇到 DEC 麻烦的人，Lou Katz 告诉我：“基本上，DEC 的维修人员会运行他们的诊断程序，然后说是我们的软件有问题，因为他们的诊断程序没问题。特别是，事实证明没有任何 DEC 诊断程序测试过 PDP-11 的 Supervisor 模式，而 Unix 就使用了这个模式。” Armando Stettner 说：“Unix 在 PDP-11 上做了很多事情，是 DEC 的操作系统和诊断程序都没有做过或测试过的。”

>DEC 无法相信所有东西都是用 C 写成的（C 是什么？）并且以大约 500 页的代码清单形式提供。更令人难以置信的是，你可以随时更改源代码。相比之下，DEC 提供了一大堆手册和文件，堆得几乎和计算机房一样高。
>
>起初，我们有一台 PDP-11/45（带有磁芯存储器；是个很好的取暖设备！），但只有一个容量为 1.5 兆字节的 RKO5 磁盘驱动器作为交换介质。我们不确定公共交通工具对磁盘盘片磁场的影响（阿姆斯特丹有很多有轨电车）。因此，我们不敢冒险，会步行从数学中心走到自由大学（大约七英里）。后来我们逐渐放心了，Unix 用户就因为会在有轨电车上提着装满 RKO5 磁带盒的大箱子而被认出来。

正是 Hagen 在欧洲启动了第一个 Unix 网络，并开始了欧洲 Unix 用户组的正规化。正如他所说，在欧洲启动网络比美国的 UUCP 和 ARPANET 更为复杂。

>欧洲邮电局（PTT）是不允许使用拨号器和调制解调器，所以我们在建立 Unix 网络时遇到了很多麻烦。邮电局的人根本无法理解 UUCP 的功能（我们讲的完全是另一种语言）。于是我们使用了一种办公桌面半自动拨号器，并把它装进一个盒子里（和 110/300 波特的调制解调器是分开的）。一家小公司生产了更多这样的设备，并把它们作为无线放大器走私穿越边境。我的好朋友、DEC 的 Armando Stettner 帮助我建立了与美国的连接（当时只有邮件，因为新闻还不存在）。压缩技术还不为人知，因此由于速度缓慢，我们花了不少钱。这就是为什么欧洲网络至今仍实行严格计费制度的原因。因为夜间资费低，我们把与美国的通信时间调整到了夜间。有一天早上，我发现与美国的调制解调器线路挂起了：不断交换错误和重启信息，这种情况已经持续了大约 10 小时。一次 10 小时的电话费非常昂贵，所以我被叫去见主任（他是数学家，对计算机一窍不通，也不想管这些）。结果我惹了不少麻烦……
>
>我们过了好几年才开始收到新闻。我还记得自己在网络上发表的第一篇文章，因为美国那边的人会对我大喊，问我到底是怎么回事，怎么能在他们写文章前几个小时就回复他们的文章！他们刚刚发现美国以外的世界。
>
>【我问过 Teus 关于 Kremvax 的事】
>
>那是愚人节。我们从数学中心发了一篇带有路径追踪的文章到莫斯科，说克里姆林宫的 VAX 正在宣布它首次登上网络。除了在网络上引发了一阵喧嚣，很多人互相大喊之外，我还听说美国政府的一次安全会议因此变得紧张起来。官员们试图立刻切断通往欧洲的通信线路。但幸运的是，很快他们发现这样的做法是徒劳的，网络的“无政府状态”依旧继续。

Kremvax 的真正起源者是 Piet Beertema；该消息发布于一九八四年四月一日。六年后，当 demos.su 加入 USENET 时，Demos 的高级程序员 Vadim Antonov 必须说服大家这不只是另一个恶作剧。Armando Stettner 的故事与 Hagen 的略有不同，他告诉我：






----


Tom Ferrin 的图如下所示：

 ![](/assets/mfpi_fix.jpg) 

