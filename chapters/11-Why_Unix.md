# 为什么是Unix

让我们在这里先暂停一下，通过一个 6 年的实验，去考虑为什么 Unix 如此顺利就能获得全世界学术界的关注。究竟是什么使得它受到这么多人的喜爱。

在最初的 CACM 论文上，Ritchie 和 Thompson 列出了系统提供的 6 个特点：

1. 一个可卸载分卷分层级的文件系统
2. 文件，设备和进程间的协同兼容
3. 初始化异步进程的能力
4. 每个用户都可以配置系统命令语言的能力
5. 超过 100 种的子系统包括十多种语言
6. 高度的可移植性

让我们列一下我喜欢 Unix 的原因：

* 在很多平台上都可以使用
* 多用户
* 提供目录层级
* 合理的分享计算机资源
* 支持对文件，进程和程序的操作
* 允许进程间和机器间的通信
* 允许访问系统自身的特性

Rudd Canaday 将它们简单的总结为:“Unix 之所以能走出贝尔实验室是因为大家都喜爱它”。最近，Armando Settner 说:“它不区分自己的还是我的方式”。

在 1976 年和 1977 年，Tom Lyon 使 Unix 的一些部分可以在普林斯顿大学的 IBM 360 机器上的 VM/360 系统上运行。在 1977 到 1978 年，Ritchie 和 Steve Johnson 将 Unix 移植到 Interdata 8/32，就在同一时间 Richard Miller 和他的同事将 Unix 移植到澳大利亚伍伦贡大学的一台 Interdata 7/32 上。Ritchie 曾经说将 Unix 移植到 Interdata 是他最自豪的意见编程工作之一。这说明 Unix 真正的移植到非 DEC 制造的机器。我一会还会说到这些。

很容易说 Unix 有这个或那个的有点，或者它可以运行在一台部门 (而不是计算机中心) 没有提供的机器上。请允许我，让现在是 UUNET 科技的副主席的 Mike O'Dell，回忆一下 1974 年的夏天。那时候，O'Dell 还是俄克拉荷马州立大学的一名学生。

> 当知名的 1974 年 CACM 期刊出版时，我正在为 OU 计算机中心工作。我们的这台机器叫做 ITE，一台断断续续的终端设备，有着世界上最糟糕的 BASIC 实现，一个伙计写了一些例程让你可以在终端上做 I/O 操作，这是一个不太重要的功能。所以我们的一个组坐下来试图计算出我们是否能用 IBM 2741s 作为打孔机做一些像编辑这样有趣的事情。这样你就能编辑任务然后提交它们，或者类似的事情。因此在我最繁忙的时候——我记得我的黑板上画满了数据结构，因为我们将所有事情都放在文件里，因为我们不知道怎样能更好的完成它。

> 这时 Unix 期刊出现了。我记得我走到商场尽头，从邮箱取出它，对自己说:“哦，ACM 在操作系统上做了一些事情，或许值得读一读 (期刊是‘第 4 届 ACM 操作系统规范讨论会论文集’)”。然后我就开始慢慢读它。在期刊里还有其他几个很好的论文。我记得我坐下来然后读到 Unix 分时系统的论文，这有点像用石头在脑袋上敲了一下。我又重新读了一遍，站起来走出办公是，走到和我做同一工作的 George Maybry 的位置，把期刊砸在他的桌子上说:“怎么这么多人会错了这么长时间？”。

> 然后他说:“你在说什么？”。

> 我说:“读这个吧，然后试着告诉我我们做得这些事情不是在犯傻。我么疯了，这才是我们想要的”。就在那时我决定我们无论如何都要得到一份 Unix。

实际上 O'Dell 被 Unix 如此吸引的原因是俄克拉荷马州电力工程实验室的一个角落里放着一台和 PDP-7 很相近的 PDP-9。O'Dell 看到 Ritchie 和 Thompson 最初是在 PDP-7 上完成了 Unix 的开发，他想在 PDP-9 上 Unix 应该也可以跑起来。O'Dell 告诉我：

> 我给贝尔实验室打电话，正巧是 Dennis Ritchie 接的。我说我们没有 PDP-11，但是我们有一台 PDP-9，我们能不能得到一份 Unix 的 PDP-9 版本？Dennis 说那并不是一个好主意 (他可能在想电话那头的孩子一定是疯掉了)。但他们的态度非常好让我受到了鼓舞。我确信我们我们一定要做这个。

> 那时的我是一个无知者无畏的年轻小伙。我打电话给塔尔萨 DEC 的销售办公室 (他们在俄克拉荷马州没有销售办公室) 要求找人聊一下 PDP-11。最终我和一个叫 Stan Bartel 的家伙聊上了。

> Stan 是一个有意思的家伙，他意识到自己永远不能将小型计算机卖到俄克拉荷马州立大学，因为到处都是蓝色的死机屏幕，去计算机中心找一份工作至少会比现在会好一点。所以他并不介意 DEC 支付的是薪水而不是佣金。他将要我们这附近带上几个星期。不管怎么说，他远道而来，吃了一顿午饭，带来了他所有的手册。处理器手册和外围设备手册。我从没有看过这些文档。那时我是一个不错的程序员，我看着这些手册学习指令集，我说“这些家伙知道这是怎么回事，这太酷了”。故事就这样开始，我被吸引住了。

就如我之前提到的，*C 语言编程*直到 1978 年才出版。之前在俄克拉荷马发生了什么？O'Dell 在 1974 年到 1978 年之间的故事和其他很多人都很像，就让他继续说吧：

> 我第实际上是在伊利诺斯州立大学第一次接触到 C 语言。我和 Steve Bunch 从俄克拉荷马州立大学去伊利诺斯州立大学访问 Mecca，在那里我们见到了 Unix。Steve Bunch，Steve Holmgren，还有 Mike Mullen 这些家伙组成成的小组将 Unix 发布到了 ARPANET。总之，Steve Bunch 发给我一份智能终端的内核列表，里面包含了上下文切换，信号量控制，进程间通信，还有一两段代码。因此我们有了五六页论文，他还写了一些无关紧要的笔记，因为我从来没有看到那个编程语言，他解释像**++**这些有趣的操作符是怎么回事。他还说“看看你能不能研究出这是怎么工作的”。我记得上下文切换是用 6 行汇编实现的，他将相关代码发给我，看看我能不能搞懂。然后我就搞明白了。

> 后来我想知道更多相关的资料。于是他给了我**tp**(在**tar**出现很久之前)，老式**tp**格式的帮助信息存储在 nroff 输出的纸带上。他将纸带寄给我，说:“这上面的东西很有些意思，如果你能解决怎么打印它”。然后他发给我真正的**tp**帮助页。

> 我在一个长长的周末坐下来写程序破解这个格式，一点点推敲，最后打印出 Unix 帮助页。那时我的第一个帮助页。它们现在应该还在我的某个盒子里，因为我当初得到它们是如此困难。

> 然后我就不停翻看这些帮助页。虽然我们不能得到系统代码，但我们可以看看它究竟可以做些什么。

靠自己努力解决问题。你认为它会如何工作？Mike 并不孤单。RAND 编辑器的作者 Dave Yost 告诉我他是如何在 1970 年看到代码的：

> 我坐下来仔细看着，看到这些卷曲的括号，**[{**和**}]**，“哇噻”!

在 C 语言里，**{**和**}**将函数的声明围起来。C 没有像 PL/I 的**DO-END**或者 Pascal 和 Algol 的**begin-dend**。C 在很多方面看都是一个简单的语言，和自然语言非常相似 (比如英语)。它不是一个“高等级语言”。就像 Thompson 和 Ritchie 说的:“C 语言是一个通用语言，有着简单表达式，现代的流程控制和数据结构，还有一套丰富的操作符...我们认为 C 语言被证明是一个令人舒适舒适，富有表达力，多功能的编程语言”。根据我的经验，是 C 语言让编程成为一种优雅的艺术。

1987 年，Ritchie 在 USENIX 技术会议上分享了他关于 Unix 成功的思考。他提到了“简单，一致，高效的计算”，还有“工具箱的概念”，以及“可移植性”。

第一个和最后一个是非常重要的：他能在不同的平台上运行。Unix 和 C 语言的优雅对流行也至关重要。当然还有风格和工具。



---
**译者注**

* [The UNIX Time-Sharing System](https://people.eecs.berkeley.edu/~brewer/cs262/unix.pdf)
