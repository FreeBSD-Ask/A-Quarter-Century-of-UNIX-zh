# 伯克利Unix 第一部分

伯克利加利福尼亚大学的Robert Fabry教授在1973年工作于SOSP程序。它对Thompson的报告有着非常深刻的印象。当他返回科瑞教学楼的时候，Fabry的第一份工作是尝试让计算机科学系，统计系，还有数学系合资购买一台PDP-11/45。他向Thompson订购了纸带，在1974年由毕业生Keith Standiford安装了Unix。就像Kirk McKusick所说的，Ken Thompson参与此前所有安装，但是不包含这一个，因为“有几个奇怪的系统崩溃需要他去解决”。Thompson会打电话给在机房里的Keith Standiford，电话随后换成了300波特率声学调制解调器，Thompson通过会通过电话线“在新泽西远程调试bug”。

接下来出现了一个问题，因为数学系和统计系想使用DEC的RSTS系统。因此一天的时间被分成了几部分:RSTS运行16小时后，Unix接着运行剩下的8小时。当时在那里接触到Unix的学生Eric Allman说:

> 我那时学习操作系统课程，他们在6400上使用一个叫做*玩具系统*的操作系统。但是他们想去使用11/40上面的Unix，我们一天只能使用8小时，而且每天使用的时间都不固定。我努力回忆:我看了手册，我记得没有理解为什么你要使用**echo**命令，非常奇怪。当然我现在知道了。第4版相当古怪，只有研究人员才会喜欢上这个系统。它很慢，只有很少的工具。接下来我们听说了Ingres项目。

> Michael Stonebraker和Eugene Wong两位教授的Ingres数据库项目是第一批移植到Unix的软件。由于他们不满意分配的时间，1974年春天他们自己买了PDP-11/40。但自此之后，学生们就没有足够的时间在11/45上面上机。1974年6月Stonebraker和Fabry两位教授计划为计算机科学系再购买两台教学用11/45。他们在1975年早期得到资金，刚好那时DEC宣布了11/79机型，他们觉得这个型号非常合适，于是资金汇集起来。11/70机器在秋天运了过来，正赶上Ken Thompson来这里以访问教授的身份进行一年的学术休假。Thompson，Bob Kridle，还有Jeff Schriebman在新买的11/70上面安装了第6版Unix。

还有一个意外结果是“50 fixes”纸带。Thompson告诉我:

> 我们意识到的第一件事情是外界都在使用Unix发布版(V4，V5，V6，V7)而我们没有使用。我们的观点是连续的。我们在某个时间点拥有过V5，但因为不断地放进模型到处很容易就过期了。

> 在第6版以后，我准备回到伯克利教一年书。我将一个系统的纸带放在一起拿着。因为它几乎是一个发布版，我在V6上做了一个**diff**。去伯克利的路上，我在厄本那香槟分校停了下来，照看Greg Chesson完成他的博士学位。我留下diff的纸带在那里并且告诉他我会留意它是否传播开(我想我可能还把它给了Katz)。(O'brien提到diff纸带一定是来时Chesson)。

> 我感到它非常重要，因为我发现了非常多的多道程序(异步)bug需要修改。发布的版本没有提供更新。在用户非公开交流的时候对此有很很多咒骂。整个情形看起来已经无法继续，我感到我应该去做些什么。

Lou Katz的说法有些不一样:

> 大量的bug修正被搜集起来，相比于一次发布一个，Ken制作了一个合集纸带(“50 fixes”)。虽然我没有特别记住哪一个，但是这里面有一些修正非常重要。我怀疑这其中有很大一部分是贝尔实验室意外的人制作的。Ken试图将它寄出去，但是律师一次又一次的拖延下去。

> 最后，在完全厌烦下，有人“在山岳大道发现了一个存有修复的纸带”(贝尔实验室位于新泽西莫里山600山岳大道)。

> 当律师发现这件事情，他们打电话给每一个授权单位试图问出他们是怎么拿到纸带的，并且恐吓他们如果不销毁纸带的话将会有可怕的后果。我猜没有一个人会真的告诉他们纸带是怎么来的(我就没有)。这只是律师证明他们的存在并试图杀死Unix众多行为的第一次。不得不说为Unix工作的律师要远多于技术人员。同时授权条款也开始更改，费用开始迅速的上涨。

也是在那个秋天两个毕业生去了伯克利校园:Chuck Haley和Bill Joy。他们对新系统着了迷，并且和Ken Thompson一起开发Pascal系统。Haley和Joy将Pascal系统提高以至于成为学生编程系统的选择。但是当ADM-3屏幕终端代替了33型号的电传打字终端，Hale和Joy对**ed**行编辑器感到不满。他们使用了一个叫做**em**的编辑器，它是伦敦皇后玛莉学院的Coulouris开发的，然后开发了每次一行编辑器**ex**。1973年Coulouris成为英国第一个接受Unix的人，他告诉我:

> 我在1975年秋天在圣母玛莉学院开发了**ex**，它可以更有效的利用我们刚拿到的vdu终端。我们有在图形显示器上开发应用程序的经验，不论是鼠标定位还是触摸板定位(这个经验来自William Newman，他花了一年半的时间和我们一起为Utah和Xerox PARC工作)。我猜测Unix终端输入的的“原始”模式在那个时候完全没有被利用，使用它可以即时看到编辑结果，让人们更方便的编辑文本。 我们将它用于我们的单用户图形系统，这让我开发了**em**。

> 换句话说，**em**的含义是**给人用的编辑器**，我是在Ken Thompson访问圣母玛莉学院以后给它命名的。Ken看了它然后说“很棒，我看到过类似这样的编辑器，但是我并不觉得我需要它们，我在编辑文件时不想看到它们的状态”。


