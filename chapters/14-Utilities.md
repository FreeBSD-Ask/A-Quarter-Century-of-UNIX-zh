# 实用工具

无论 Unix 的版本或厂商如何，每次安装都会附带大量程序。这些程序包括编辑器、格式化工具、编译器；还有一些实用工具，能让用户按字母顺序排列列表，跟踪程序或文档的不同版本，甚至“接触并交流”其他用户。本章将聚焦其中少数几个：一些非常早期的工具——troff、eqn、tbl、yacc、mail、make、awk——以及一些较新的工具——UUCP、TCP/IP。后两者催生了更多实用程序（Mike Muuss 的 ping 和 Earl Cohen 的 finger 是很好的例子），也孕育出一个全球范围内几乎即时“交谈”的用户社区。这个社区对 Unix 至关重要。问题、解决方案、程序、抱怨、公告等都可以自由交流。正如 John Quarterman 所指出的，这个网络用户社区规模估计有三千到三千五百万人，相当于一个比加拿大还大的国家。

Mail 在第一版就已经存在，roff 和 ed 也是如此。Morris 将 roff 移植到 635 计算机上之后，McIlroy 用 BCPL 重写了它，随后 Thompson 将其引入了 Unix。但后来 Joe Ossanna 将 roff 推进发展成了 troff，一个真正用于排版文档的格式化工具。Ossanna 于 1977 年 11 月 28 日去世，但 McIlroy 告诉我：

>Joe 是军需官。他走访各个供应商，关注硬件的新动态，处理工厂部门的各种事务，等等。他是严肃却可爱。

eqn 出现在第五版。Brian Kernighan 曾说这是他对 Unix 的第一个重要贡献。正如他对 Collinson 所说：

>这些程序当时都是用汇编语言写的。最初版本的 troff，大约是在一九七三年或一九七二年底写成的，是一个汇编语言程序，专门为 Graphics Systems 的排版机设计。直到今天，troff 语言语法中仍然保留着那个古老机器的痕迹。
>
>Joe Ossanna 把它转换成了 C 语言，我想是在很大压力下进行的，他其实并不想把它转成 C 语言。他于一九七七年末去世，我“事实继承”了它，尽管直到大约一年半之后我才尝试编译它。我开始着手让它独立于 Graphics Systems 的排版机，因为那台机器当时明显已是日薄西山。我开始加入图形功能，因为新的排版机——Mergenthaler 机器，具备一定的图形能力。你可以非常精确地定位点，从而画出线条和曲线。
>
>Mike Lesk 大约在一九七五年写了 tbl。Lorinda Cherry 和我很快写了 eqn。\[Cherry 告诉我她是项目发起人，Kernighan 后来“加入”了；但 Kernighan 因其极为成功的语法设计而被认可。] eqn 是第一个文档准备预处理器。这种设计其实是被逼出来的，俗话说“需求是发明之母”——类似的原因。troff 已经非常接近 PDP-11/40 的地址空间极限了，而且是用汇编语言写的。我从没学过 PDP-11 的汇编语言，我想 Honeyweil 机器是我学汇编语言的最后一代机器。
>
>Joe 非常珍视 troff，他很乐意帮忙修改让它实现功能，但它是他的程序，他不会允许别人随便修改。所有这些因素使得 Lorinda 和我几乎被迫写一个单独的程序。
