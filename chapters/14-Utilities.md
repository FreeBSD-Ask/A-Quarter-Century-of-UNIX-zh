# 实用工具

每个Unix机器上都安装着数目繁多的程序，不管是系统原生的还是厂商附加的。这其中包括编辑器，格式器，编译器。实用工具使得用户有一个字母列表跟踪程序或者文档的不同版本，去“伸手戳一下”其他用户。这章将用来讲述它们中的一部分:非常早期的——troff，eqn，tbl，yacc，mail，make，awk，还有最近出现的——UUCP，TCP/IP。最后两个又引发了其他的实用工具(Mike Muuss的ping和Earl Cohen的finger就是很好的例子)，并且几乎立即就出现了一个世界范围的由各种不同用户组成的社区。这个社区对Unix来时及其重要。各种问题，解决方案，程序，抱怨，宣告等等都在社区里自由的交换传送。整个社区建立在大约3000万到3500万的网络用户之上——就像John Quarterman所说的，比加拿大的总人口都要多。

mail和roff以及ed一样，在Unix第一版时就存在了。Morris曾经将roff移植到635上，McIlroy用BCPL语言将它重写。Thompson将它移植到了Unix。但Joe Ossanna不久又将roff合并到了troff，一个真正针对电传打字机文档的格式器。Ossanna死于1977年11月28，McIlroy告诉我:

> Joe是军需官，他游走于各个厂商，打探硬件的最新发展，和设备部门做交易，还做了很多很多其他的事。他是一个严厉而有吸引力的人。

eqn在第5版的时候加入进来。Brian Kernighan说这是他对Unix做出的第一个重大贡献。就像他向Collinson说的:

> 那个时候所有的程序都是用汇编语言写成的。troff的最早版本应该是在1972年晚期或者1973年写的，它是一个汇编语言程序并且只针对特定的图形排字机系统。在今天仍然有许多事情依然受到troff语言那古老机器语法的影响。

> Joe Ossanna将它转换成C语言，我认为他受到了相当大的影响，他并不真的想将它转为C语言。他死于1977年，之后我接手了它的工作，事实上，虽然我花费了至少一年半的时间试着去编译它。我开始让它独立于图形排版系因为那时它的优势已经很明显了。我开始投入到图形中因为新型的默根瑟勒排版机可以做一些受限的图形操作，你可以非常精细的定位，你可以画直线和曲线。

> Mike Lesk大概在1975年做了**tbl**，在Lorinda Cherry和我做出**eqn**不久之后(Cherry告诉我他开始着手项目的时候Kernighan就加入了，但Kernighan因为非常成功的语法而出名)。**eqn**是第一个文档预处理器。它是我们强行实现的一个好主意，需求是发明之母。**troff**几乎用尽了PDP-11/40s的所有地址空间，它用汇编语言写成。我从来没有学过PDP-11s的汇编，我想Honeywell是最后一个我知道汇编语言的机器。

> Joe独自保持维护**troff**，他对于修改它使它工作有着难以置信的兴趣。但这是他的程序，他不想让其他人参加进来。这些事情加起来意味着Lorinda和我不得不去做一个分割程序。

> 几个事情合作的非常好。C语言变得非常具有可用性，yacc分析生成器刚刚出现，管道也刚被发明出来。所有这些事情一起使商用变得可能。

Kernighan和Cherry实现的“一个数学排版系统”发表在1975年3月的CACM上。1976年9月14日，M.E.Lesk实现的的“Tbl——一个格式化表格”发表在贝尔实验室计算机科学技术报告第49期上。和troff一起，这些预处理程序使得Unix用户可以排版各种各样的复杂文档。精心制作的宏包，增强了的**-mm**(memorandum)宏极大地扩展了功能。Mike Lesk写了**-ms**宏，Eric Allman写了**-me**宏。只有**-ms**出现在Unix的研究版本，**-mm**出现在第三第四版本。**-me**和**-ms**出现在BSD(Lesk还写了**refer**，可以使用引用数据库提供引用和脚注)。

yacc(yet another compiler-compiler，有一个编译器的编译器)，是Steve Johnson的作品。他在Unix出现之前很久就已经在贝尔实验室工作了:

> 我在1963年有了第一份工作。我总是对计算机感兴趣，当我拿到学士学位，我试着找一个研究生学校。只有很少的地方我可以去，这些地方大部分都属于电力工程部门，在那里我不得不学习发电站的建设以及其他那些我完全不感兴趣的课程，所以我决定去学数学。因此我在63年夏天去了贝尔实验室，Tom Growley是我的第一个老板...那里有一个基本的规矩，你不能连续两个夏天都在同一个组工作。因此下一个夏天我去了ALPAC的数学组。再之后的那个夏天，我依照流程去了人类信息处理组，那里有声音，语言，心理方面的人们设计实验和进行数据分析。他们需要做一些多维度的工作，这使得聚类成为我的第一篇论文，它在我所有的出版物种有着最多的引用——一共有700之多。

> 当我完成我的论文，我去贝尔实验室。我可以选择我将要去到哪个组，最后我选了人类信息处理组，因为他们会用一些我很感兴趣的计算机音乐。我在那里做了很多事情。也在那个时候，Multics被认为是繁重计算工作的解决方案，但它是一场灾难。基本上，我们购买了7094并把它运送到印第安山实验室，并且除了645上的GECOS没有其他系统可用。GECOS可以支持1000个用户但是1个就会很勉强(McIlroy向我指出645“运行了大量的批处理”)。

> 因此，到了下一年，在极端努力之下这台几百万美元的机器可以运行FORTRAN程序了，我同意帮助他们的工作去介绍分时系统。因此在1969年我实际上在Comp中心和一个小组一起工作。在这些时间里，Comp中心分化出了计算机科学研究实验室。然后有了办事员，计算机操作员，打卡员等等这些向研究部门汇报的员工。我到那里一年之后，他们才姗姗来迟地设立了一个组织运营计算机中心。我决定宁愿留在研究中心，那样有个后门我可以去做Unix的组。

> 我最早是和Dennis Ritchie一起工作于另一个叫做Altran的计算机代数系统。Dennis写了Altran语言的编译器。它是一个用FORTRAN写的递归下降编译器，这绝对是一件杰作，就像用牙签建造了一幢摩天大楼。他曾经为B语言写过一个运行在Honeywell系统上的编译器，我们用它写一些系统程序。但当他和Ken开始为Unix工作时，他终止了他的B语言编译器，然后我领取了它。这个语言里面有一些我想要的东西，比如我添加了高级OR操作符。我从何Dennis一起工作中学到了很多编译器的知识，并且这是一个非常体面的工作。我变得相信你可以通过阅读其他人的代码学到非常多的东西。阅读那些杰出的名著。

> 
