# DEC

第二章的很大部分内容都是在说数字设备公司 (DEC)，这是因为在普林斯顿大学做出成果前，Unix 只能运行在 DEC 生产的机器上：PDP 系列 (特别是 PDP-11) 和后来的 VAX 系列。但是 DEC 公司自身是不提供官方的 Unix 支持的，他们有自己的系统：FOCAL-11，VMS，TENEX。本质上 DEC 在前 20 年都有一种被 Armando Stettner 称为 NIH 的文化——这里就不再细说了。上 Unix 是贝尔实验室产品的事实足够取消 DEC 的工程师们。

但是在 1970 年后期，有一个不断增长的认识是 Unix 没有离去，硬件工程师们也意识到乐于助人的 Unix 用户非常重要。Ritchie 和 Thompson 曾经去 DEC 访问过几次。现在 DEC 设置了一个 Unix 支持组——“我们是同一类实验室”。Armando Stettner 在 1979 年后期离开贝尔实验室去了 DEC，他是 Usenet 的早期发起人，Ultrix 的架构师 (DEC 版的 4.2BSD)，同时也是 Unix 车牌的首位用户。他告诉我：

> 我将拥护 Unix 的氛围带到了 DEC，否则 DEC 就不会有在纳舒厄的 Unix 工程师组 (UEG)。我们在新罕布希尔州的梅里马克工作。我们将 Spitbrook 路称为“Saliva Creek”。有一次服务和支持部门的人们知道我们在那里，他们给我们打了电话。

> 但是当 Bill Joy 来访问的时候，我仍在做着 32V。当我们从波士顿洛根机场到新罕布什尔的时候时间太晚了，唯一还开着的地方是 Denny 的办公室。我们那天晚上做的事情是描绘出我们将要做什么。我们想维护所有我们身边的软件，修正配置文件，然后把这些发布成一个发行版。我办开玩笑的说“为什么我们不把 Unix 移植到 DEC 20 系统上？”。Joy 说“看，这需要 10 天的时间，但是我在这里只能呆 7 天”。后来证明 Bill 有 10 天的时间。接下来我们晚上在 VMS 工程师组的实验室做 VMS 组的原型。Bill 做 VAX 780，Bill Shannon 做 750，我做 730。基本上，我们会一起做出某些东西，然后分头到个自的机器上调试它。我们有一个 RP06 磁盘，我们将它称为 5BSD，因为我们确信下一个发布的将会是 5BSD。

> 我们复制了一个磁盘，Bill 拿着它回了加利福尼亚。Shannon 和我将磁盘复制到了 decvax——一台 780 机器，我们的主力系统。Bill Joy 接下来几天给我们打电话说“嗨，如果我们发布另一个发行版将会有很多授权方面的麻烦。那么我们为什么不把它称之为 4.1BSD?”。

10 年后的 DEC 似乎是在反对 Unix。Steve Johnson 向我评论说：

> 当然，当 VAX 机型出现的时候，很明显 DEC 认为它是一台很棒的机器，至少在硬件方面是这样，Unix 可以为他们的销售额做什么？但他们仍然没有赞助。

我问 Armando 关于事情的情况。

> 我来到以后，UEG 做了很多的支持工作——我们写设备驱动和做一些底层工作：Unix 的硬件依赖部分。伯克利专注于高层。知道我们的顾客会告诉他们的驻场工程师给我们打电话。我们开发了一个测试和一个语言所以我们可以和驻场的人们有关系。当支持 Unix 的时候有一个很大的新人问题，当一台机器不能运行 DEC 的软件时驻场工程师不知道该怎么做。账号管理和客户满意度永远是一个问题。

> Spitbrook 对 Unix 总是充满了敌意，坦白说是对整个公司...工程部门和管理部门尤为严重。Dave Cutler 是 DEC 工程部门的中坚力量，他抓住了某些东西作为折中——我想是 VMS 上的 SRI 软件包。Cutler 把 Munson 叫来，记得在 AT&T 和大学，Unix 是 DEC 的一个大问题。因此 Cutler 被 Munson 叫来，Munson 说他会让我们一些人过去看一看。所以 Bill Shannon 和我去了那里，大概有 20 分钟的路程。我们去了那里，Cutler 正在他的办公室里。Bill 和我坐在一个终端前，任何事情都不能做。Cutler 问它有什么问题，我说它不能工作了。Cutler 说“好的，谢谢你们”。我们回到梅里马克，Munson 把我们叫到办公室 (他是资深管理人员)，问我们“你们去那个地狱做了些什么？Cutler 给我打电话对我念叨说对你们的工程师深表遗憾并且再也不想在 Spitbrook 见到你们”。

> 我想 Cutler 的轻蔑影响了他此后的工作。在 DEC 内部的 RISC 战争中，Cutler 在新的 Prism 架构上做了另一个操作系统而不是使用 Unix。Cutler 的系统不能移植，但是从文化上兼容 VMS。我想 NT 中的许多东西可以追溯到 Prism(Cutler 在 1983 年去微软工作)。

> 我们有一个 Unix 产品经理，有一天我们在走廊里走着，我说“Bill，你知道我觉得现在是啥时候为 VAX 做一个真正的 Unix 产品，一个 VAX Unix”。我做了一个计划，Bill 把它拿给 Munson 看，对他说“让我们做出来看看”。基本上，我的计划是基于 4.2BSD 的，如果伯克利没有发布 4.2，那就使用替补计划的 4.1。我对于 4.2 很有信心，因为我们已经拿到了测试版本，并且我们已经在使用它了。但是我们需要一个意外处理方案，也就是 4.1。尽管这样，那时 Sun 已经宣布在伯克利之前宣布了 4.2——Bill Joy 才刚拿着 4.1c 离开。我们发现 4.1 在 decvax 上非常稳定。我那时是技术经理。

1980 年在旧金山的 USENIX 会议上，Bill Munson 宣布 UEG 的目标是“启发 DEC 发现 Unix 和它的机会”。Armando 有另外一种启发。

> 1982 年 1 月我在东海湾的圣莫妮卡参加 USENIX 会议，当 Bill Munson 冲出来的时候我们正要宣布 DEC 有一个 Unix 项目。Slsen 在我们的后面。显然他带着我寄给他的 Unix 车牌，他把车牌挂到一些人的胸口然后对 Munson 说“去搞一个 Unix 产品，把它做好！”。所以 Munson 红着研究去东海岸发出上那个公告。

Armando 最为值得记忆的“露面”是在 1983 年圣地亚哥 USENIX 会议上，我问他这次会议的情况。

> Bill Shannon 刚刚买了一个新的 Datsun，一个 280ZX，我们开车去汉堡王把它们取回来。Bill 有一个“UNIX”的车牌，我们想为 USENIX 会议做一些事情...每个人都有自己的小伎俩。所以我们说“让我们做一个海报”，又有人说“好，让我们拿一台 VAX 和一台终端，在木头上将它们建立起来”。我不记得我们为什么要把 VAX 放到木头里面去。我建议去拿实验室的 780，在它上面画一个挡风玻璃，放上去一些 VW 轮胎并把 Shannon 的车牌放在挡风玻璃下面，然后用这些制作了一张海报。要想得到做这些事情的权限非常复杂，所以我去和 PR 的人谈了谈，正好他有所有这些目录。我看着这些目录和已经有的车牌，一个点子就冒出来了。Munson 给了我 800 美元，我制作了 3000 个绿色 UNIX 车牌。

> 我记得我站起来说我想宣布你现在可以从 DEC 拿到 Unix 授权。台下所有这些来自几个 Unix OEM 厂商的家伙们都震惊了。我扶起车牌，死一样寂静的房间里爆发出大笑和鼓掌的声音。从房间的后面传出来一个声音:“Armando，你能从这件事学到什么？”，是 Dave Yost 说的。后来我们收到了一封来自贝尔律师的关于商标的信件。但是他们又打电话给我告诉我们他们不得不发送那封邮件来保护商标，但是我们能不能也给他们寄一些车牌。于是我们就寄了。

多年来 DEC 和 Ken Olsen 一直忍受着 Unix 用户大量批评。1983 年圣地亚哥的 UNICOM 上，Bill Munson 说 Olsen 曾对他说“要澄清一下...DEC 支持 Unix!”。但是 Olsen 也曾在 1988 年说过“Unix 是蛇油”。无论如何，Armando 在 DEC 花了十多年的时间在 DEC 扮演“Unix 传福音者”，感觉 Olsen 受到了不公平的对待。

> 事后想起来，我认为 Ken 有一个坏建议。Ken 是那个说“做 Unix”的家伙。Ken 是那个说“做 Pmax(MIPS 和 DECstation3100)，从别的公司买架构”的家伙。我认为赶走他的别人说的：人们想要它。你知道，那句“Unix 是蛇油”的评论是断章取义。当然，这有消极的含义，但是 Ken 真正的意思是“每个人都在说你需要 Unix”。每个人都在推销 Unix。我能记得见到那些真正需要 Unix 的客户，但是他们自己也不知道是为什么。人们到处都在谈论。Ken 的意思是“就像人们在一个世纪之前离不开蛇油一样，现在每个企业都需要 Unix 来做事情”。那句“Unix 是蛇油”评论的语境是：做了一个类比。不幸的是，就像一些人说过的，Ken 总是不了解他说的那些话会有什么影响。

> 但是根据当时在场的一些人的记录，是 Ken Olsen 向开放软件基金会争取 Unix 对抗他的副手。DEC 的问题是所有运营这个公司的人们都是从工程师成长起来的，没有人有商业经验。就像任何很好的工程师，他们维护自己的产品和他们的合作伙伴。这就是为什么 DEC 的问题出现在 80 年代而不是 90 年代。

> DEC 有自己一系列的成功：PDP-11 和 VAX，在它的竞争还比较小的时候。但是到了 80 年代中期工作站和 RISC 机器开始和 DEC 竞争，DEC 却没有可以对抗的机器。另外，DEC 开始试着离开它的大本营，离开科学 - 工程师 - 学术的社区，去争抢 IBM 的市场。Cutler 曾经为这个新机器和新操作系统工作过。我们确信它不会做我们需要它做的事情。如果它成功了，如果可以给 IBM 的市场定价，它会比 Unix 市场昂贵太多，DEC 将会在和 IBM 对抗的时候拱手将钱送上。另外，据我们从 Sun 的 SAPRC 得到的可靠消息，Prism 机器发展的不够快。但是我们想让 Cutler 为 VMS 市场做他的系统，我们想在 Unix 市场之后做自己的系统。我们的系统是基于 MIPS R2000 RISC 芯片。Kne Olsen 对这个相当感兴趣。

> Pmax 使得公司两极分化。起初从东面回来的 Unix 组不想去做这个。我们 (在帕洛阿尔托的) 觉得 DEC 这么大已经足够去做和管理两个架构...人们开始讨论一个不能拥有自己架构的公司能否取得成功。

> 我们真的非常喜欢 MIPS 架构和 R2000 芯片。我们喜欢 MIPS 的家伙们。它有一个 64 位的计划。人么问的更多的是什么？和我们谈过的顾客都非常喜欢它！

> 如果 DEC 把它一般的能力花费在 MIPS 的关系和架构上，他们就会安全的继续做 Prism，今天的产业界可能就不是现在这个样子了。

> 在 Gordon Bell 关停 DECsystem-20 的时候就应该想到这些。我觉得特有系统是叫做 Jupiter。我认为是因为他的 VAX 没有一个强大的竞争对手来争夺所有这些 TENEX/TOPS-20 的客户。我相信 Cutler 在 70 年代的时候不想他的机器有一个竞争对手。他当然不想在 80 年代为不同的市场提供不同的系统。他真的太担心会杀死 Unix。

> Ken 在董事会的授权下，违抗所有工程管理层的一致劝告，让我们放弃 Prism 转而去做 Pmax。还有一个限制：拒绝我们要求的 1 年时间，我们不得不在 9 个月的时间内完成这个奇迹。我们做出来了。《Sam Jose Mercury》说:“DEC 震惊了硅谷”。《Upside》公布了一张图片，Ken 从一个帽子里拉出一只兔子，图片的标题是:“Scotty，想看我从帽子里拉出另一只兔子吗？”。

> 但是 DEC 继续它的 NIH 姿态：测试芯片非常像 Prism 芯片。Ken(或者公司文化，他们有区别吗？) 不知道该如何去和别的公司合作。因此他们从来没有为 MIPS 的未来做任何事情。甚至 OSF 和 X/OPEN 也成为问题。只是因为一个人的看法...

有趣的是，一旦 Armando 和其他人离开 DEC，ULTRIX 就不再继续：1990 年，DEC 仍然说“ULTRIX 操作系统是一个源于 4.2/4.3 版本的伯克利软件发行版 (BSD) 驱动实现，它提供了许多 AT&T 的 System V 接口定义所规定的系统和库调用”。知道后来，DEC 为了支持 OSF/1 完全砍掉了 ULTRIX。

| ![](/assets/bill_ken_greg.jpg) |
| :-: |
