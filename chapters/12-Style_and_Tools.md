# 风格和工具

时间回到Ritchie和Thompson为他们为ACM讨论会准备论文的时候。Brian Kernighan和P.J. Plauger正在合作写*编程风格的要素*(Elements of Programming)。Kernighan说:“我们从1973年开始写，在74年早期结束”。Plauger强调:

> Brian Kernighan和我在莫里山贝尔实验室的隔壁办公室几乎以事故收场...

> 我们怜悯计算机编程的糟糕状态，以商业创作结束。我们都是第一次写作，这一本小书花掉我们差不多4个月的时间。据我所知，它让“编程风格”作为成人间合法的讨论话题出现在书上。

> 当然，这本书现在已经过时的可怕了...

Kernighan告诉Peter Collinson:

> Plauger和我写那本书，过程很有趣，结果也还很不错。那本书背后的思想是列出很多代码然后评论它们:那样做不对，应该有更好的做法。我们不说应该怎么做，而只是说应该不去做什么。我们的目标语言是那时社区的主要语言FORTRAN和PL/I。

*编程风格*引起了很大的轰动。但是不管是Plauger还是Kernighan都强调它只涉及了FORTRAN和PL/I。他们两人合作的下一件工作有着更加深远的影响。Collinson问Kernighan他是怎么开始写*软件工具*(Software Tools)的。他回答说:“这很难说”。

> 几年以后，我们决定是时候去告诉人们一点东西，让他们知道他们应该怎么做事情。那时候，我们清楚的知道一些Unix环境的好处:管道可以让程序在一起协同工作，还可以加上过滤器。还没有一本书清楚了讲解怎么用一个编程语言实现这些。当然，C语言在很多环境里是不存在的。我已经完成了Ratfor(Rational FORTRAN)。Ratfor简单的偷窃了C语言好的一面，但是除此之外并没有添加太多东西。它还算不错，将FORTRAN变成一个编程语言。

> 我们决定用Ratfor作为那本书的编程语言实在是违反传统，因为它只有很少的用户。小组里没有一个人，因为那时没人用FORTRAN语言，除了数值分析员。但他们担心可移植性所以他们不想用Ratfor语言写出无法月的的FORTRAN代码。

> 最初的版本使用C语言用一些yacc的语法写的(**yacc**是“yet another compiler-compiler”的简写，由Steve Johnson编写)。给出自举，它就能花费一些时间用Ratfor语言写出来。之后它能在一个只运行FROTRAN的机器上运行。为了软件工具包分发的一部分程序是用Ratfor实现的Ratfor，还有一部分是用FORTRAN实现的。纸带上开头就是FORTRAN实现的Ratfor，因此你可以简单的拿出纸带开始运行。

Collinson接着问:“那么你有了Ratfor，你是怎么从它们又做到软件包的”?

> 你坐在哪里，然后问Unix系统中有哪些有意思的事情。事实上有很多的小工具你可以将它们用有意思的方式组合在一起工作。书的前三章内容会让你看到:字符输入输出是最通用途径，文本就是一切，数据就是一行一行的流式文本，也许归档也可以算是。

> 然后我们介绍了正则表达式。这些是Unix中非常重要的基本概念。有了这个，接下来的事情就是模式搜索，**grep**家族，还有编辑器。事实上，排序也可以放在这些工具里面，关于算法有很多有趣的算法可以说。

> 
