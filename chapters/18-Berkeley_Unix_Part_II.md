# 伯克利Unix 第二部分

1978年早期，Richard Fateman教授开始寻找一个有更大内存寻址空间的机器，这样就能在PDP-10上继续做他的Macsyma。Fateman解释说:

> MIT有一个MAC项目，它的程序叫做MACSYMA。为了和VAX只最初只能PDP-10上运行的那个同名项目区分开，我就叫它VAX/Macsyma，有时也会说成vaxima。MIT后来将Macsyma卖了出去，从它的名字也可以看出来，它被卖给了Symbolics公司。接下来所有的后续版本都不被Symbolics所控制，也不被再接下来的所有者马萨诸塞州阿灵顿的Macsyma公司控制，这些版本被称为和Macsyma不一样的名字:

> DOE-Macsyma —— (能源部的版本)
> Paramax —— (Paradigm Associates)
> Maxims —— (德克萨斯州立大学Bill Schelter移植的通用Lisp版本)
> Aljabr —— (Jim O’Dell开发的Macintosh版本)

> 所有这些分支版本在本质上都和vaxima差不多，虽然它们的支持者都声称自己选择了最好的。

不管怎么说，新的DEC VAX 11/780机器看起来符合Fateman的需求，而且Fateman关于NSF的提议和其他13位教员的建议一起得到了部门基金。最初VAX运行的是DEC的VMS操作系统。

但是部门开始变得习惯使用Unix，并且Fabry得到了一份Unix 32V移植到VAX的拷贝，这是霍姆德尔贝尔实验室的John Reiser和Tom London开发的。移植项目的主管是Charlie Roberts，这些是他回忆的那段故事:

> 77年到78年DEC提前宣布了VAX。Dennis和Ken还有Steve和DEC公司变得相当疏远。他们觉得自己的工作已经安装在很多的机器上，DEC仍然拒绝支持Unix并且继续开发VMS。所以当DEC提供给他们一台VAX的时候，他们拒绝了(Doug McIlroy告诉我他们拒绝的另一个原因是“VAX使用让人非常厌烦的复杂指令集，这于Ken和Dennis的价值观非常不一致”)。之后Dennis和Steve为移植到Interdata上工作，Steve称它为“Intersnial”。

> 因此DEC去霍姆德尔找到了我们。显然我们是后备人选。Tom London和John Reiser对此很有兴趣，Ken Swanson也是，我们在78年早期拿到了VAX机器。我不做任何技术工作。实际上，我花费了大量的时间和精力让管理层同意我们做这个。你看，这不是研究。最后管理层给了我们一点时间。大概用了3个月的时间我的小组将第7版Unix一直到了VAX。我们在1月得到机器，然后在4月让它运行起来，8月的时候它就可以真正的工作了。接下来的事情大家都知道了，大约有6个大学给我打了电话——布朗大学，加州大学，伯克利大学，滑铁卢大学，其他的我已经记不起来了。所以我为了专利和授权去见Roy Lipton和Al Arms，经过不断地反复，他们决定我们可以将给大学作为研究途径使用，Al将会和大学签订一份“特别研究协议”。

> 我在一些会议上见了Fabry，我那时去伯克利和Ferrari，Emmannuel Blum和Bill Joy做论文和演讲。所以在贝尔实验室11区管理部门的祝福下，我将32V给了伯克利，时间是1978年11月。

批准了Roberts合作的管理层是C.C. Cutler，R.W. Lucky，和W.S. Boyle。1127管理层——Doug McIlroy，Sam Morgan，以及Bob Prim也批准了。

1979年32V成为了3BSD。Kirk McKusick向Peter Collinson描述了故事情节:

> 当Ken离开这里回贝尔实验室去的时候，他留下了一份Unix系统。Bill和Chuck Hale接管了这个系统的开发。那时候他们做的是像升级到第6版和集成实验室的“50 fixes”纸带之类的事情。后来他们又将它升级到第7版。

> Bill又在实用工具方面做了很多工作。他厌倦了shll，将John Mashey在PWD中关于shell的一些点子添加到**csh**中。Bill也对**ed**很有些意见，所以决定开发一个扩展的面向行的编辑器**ex**。然后我们将我们的几个终端从没有鼠标定位的ADM-3s升级到具备此功能的ADM-3a。只有Bill和那个房间里的两个人真的喜欢用他们。他开始了**vi**的开发，因此他总是有理由将正在使用新终端的人赶走。最初的**termcp**也被发明出来，这样就可以在不同的ADM终端上运行一样的编辑器。

> 关于**vi**为什么没有多窗口模式还有一个寓言故事。Bill编写调试代码终于使它勉强可以工作，但这时候突然有一个磁盘坏掉了。这个有窗口版本的磁盘没有被即时备份，备份好的只是没有窗口的代码，他也不想再去从写开发一遍。

> 最初的伯克利软件发行版，叫做BSD而不是1BSD，它包含了Pascal系统和**ex**。Bill除了是一个天才的程序员，还是一个天才的市场销售。他做了很多通俗易懂的演讲告诉人们这个东西是多么的棒，Pascal解释器是如和做到只花费C语言编译器十分之一的时间，并且它还有错误纠正功能，所以它更时候学生因为可以给他们更多的额支持。他卖出了大概35份BSD纸带，每份定价是“只是成本价”的35美元(原价50美金)。BSD发行版的关键是Bill，他是黑客，是电话客服，是纸带绕带员，他将地址写在标签上，将它们寄出去，他做了所有的事情。

> 接下来就是2BSD，它在大约一年以后出现，包含了Pascal系统，**ex**，**vi**，和**csh**。他单枪匹马做了这些并且在那年卖出了100份...

> 2BSD将是基于V7的，因为我们是在1978年拿到了预发布的UNIX/32V。V7由此一直到了VAX。它没有分页和其他什么特点，它只是一个在VAX上运行的基于交换的传统UNIX。我们有一个编号非常小的VAX-11/780，一个个位数的编号。

> Bill要做的第一件事就是让32V在VAX上跑起来，这需要你的机器使用和发行版纸带有完全相同的硬件，那时还没有auto-configuration的概念。你不得不做到硬件和他们完全一致，不能是丝毫的差异。正好我们有两盘磁盘，正好它们都是RP06s。

> 下一件要做的事情是移植使用工具。我曾经为Pascal解释器做过一些事情，添加一些新的功能和修改一些不太对的地方。Bill对我说“你为什么不把解释器移植过来?”。

> Pascal解释器是用汇编写的，“移植它非常简单，它只有很少的操作步骤并且汇编语言看起来几乎都一样”。他做了一点小例子向我证明这事做起来很简单。我花了一个月的时间做移植工作，最后我放弃了汇编，用C语言重写了解释器。
